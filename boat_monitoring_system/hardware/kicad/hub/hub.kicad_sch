(kicad_sch (version 20211123) (generator eeschema)

  (uuid 6f4e7e4e-9f4e-5e4e-9f4e-5e4e9f4e5e4e)

  (paper "A4")

  (title_block
    (title "Boat Monitor Hub")
    (date "2025-11-16")
    (rev "1.0")
    (company "Bristol 32 Liberty")
    (comment 1 "Central hub with ESP32-S3, LoRa, Display, SD card, RTC")
  )

  (lib_symbols
    (symbol "ESP32-S3_1" (pin_names (offset 1.016)) (in_bom yes) (on_board yes)
      (property "Reference" "U" (id 0) (at 0 0 0)
        (effects (font (size 1.27 1.27)))
      )
      (property "Value" "ESP32-S3" (id 1) (at 0 -2.54 0)
        (effects (font (size 1.27 1.27)))
      )
    )
  )

  (text "HUB - CENTRAL CONTROLLER"
    (at 25.4 25.4 0)
    (effects (font (size 2.54 2.54) bold) (justify left bottom))
    (uuid 11111111-1111-1111-1111-111111111111)
  )

  (text "ESP32-S3 DevKit\nMain Controller & LoRa Receiver"
    (at 38.1 38.1 0)
    (effects (font (size 1.27 1.27)) (justify left bottom))
    (uuid 22222222-2222-2222-2222-222222222222)
  )

  (text "RFM95W LoRa Module\n915 MHz - Hub Receiver"
    (at 121.92 38.1 0)
    (effects (font (size 1.27 1.27)) (justify left bottom))
    (uuid 33333333-3333-3333-3333-333333333333)
  )

  (text "3.5\" TFT Display (ILI9488)\nTouchscreen - Multi-Node View"
    (at 38.1 76.2 0)
    (effects (font (size 1.27 1.27)) (justify left bottom))
    (uuid 44444444-4444-4444-4444-444444444444)
  )

  (text "microSD Card Module\nData Logging"
    (at 121.92 76.2 0)
    (effects (font (size 1.27 1.27)) (justify left bottom))
    (uuid 55555555-5555-5555-5555-555555555555)
  )

  (text "DS3231 RTC\nReal-Time Clock with Battery"
    (at 38.1 114.3 0)
    (effects (font (size 1.27 1.27)) (justify left bottom))
    (uuid 66666666-6666-6666-6666-666666666666)
  )

  (text "POWER SUBSYSTEM"
    (at 25.4 152.4 0)
    (effects (font (size 1.27 1.27) bold) (justify left bottom))
    (uuid 77777777-7777-7777-7777-777777777777)
  )

  (text "12V Boat Power -> LM2596 -> 5V (3A)\n5V -> AMS1117 -> 3.3V (1A)\n12V 7Ah Backup Battery (Schottky OR-ing)"
    (at 25.4 165.1 0)
    (effects (font (size 1.016 1.016)) (justify left bottom))
    (uuid 88888888-8888-8888-8888-888888888888)
  )

  (text "PIN ASSIGNMENTS - ESP32-S3"
    (at 162.56 25.4 0)
    (effects (font (size 1.27 1.27) bold) (justify left bottom))
    (uuid 99999999-9999-9999-9999-999999999999)
  )

  (text "I2C (RTC):\nGPIO8  -> SDA\nGPIO7  -> SCL\n\nLoRa SPI (SPI0):\nGPIO10 -> CS\nGPIO11 -> MOSI\nGPIO12 -> SCK\nGPIO13 -> MISO\nGPIO9  -> DIO0 (INT)\n\nDisplay SPI (SPI1):\nGPIO34 -> CS\nGPIO35 -> MOSI\nGPIO36 -> SCK\nGPIO37 -> MISO\nGPIO33 -> DC\nGPIO21 -> RST\n\nSD Card SPI (SPI2):\nGPIO38 -> CS\nGPIO39 -> SCK\nGPIO40 -> MOSI\nGPIO41 -> MISO\n\nControls:\nGPIO3  -> BTN_ARM\nGPIO4  -> BTN_DISARM\nGPIO5  -> BTN_SILENCE\n\nBuzzer:\nGPIO15 -> Buzzer (via transistor)"
    (at 162.56 38.1 0)
    (effects (font (size 0.889 0.889)) (justify left bottom))
    (uuid aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa)
  )

  (text "CONNECTIONS SUMMARY"
    (at 25.4 190.5 0)
    (effects (font (size 1.27 1.27) bold) (justify left bottom))
    (uuid bbbbbbbb-bbbb-bbbb-bbbb-bbbbbbbbbbbb)
  )

  (text "All modules connect to:\n- 3.3V power rail (except SD card & display backlight use 5V)\n- Common GND\n- Respective SPI/I2C buses per pin assignments\n\nProtection:\n- TVS diode (P6KE18A) on 12V input\n- Reverse polarity protection (Schottky diode)\n- 2A fuse on 12V input\n- Decoupling caps on all power rails (100nF ceramic + 10uF electrolytic)"
    (at 25.4 200.66 0)
    (effects (font (size 1.016 1.016)) (justify left bottom))
    (uuid cccccccc-cccc-cccc-cccc-cccccccccccc)
  )

  (label "ESP32_I2C_SDA" (at 63.5 127 0)
    (effects (font (size 1.016 1.016)) (justify left bottom))
    (uuid dddddddd-dddd-dddd-dddd-dddddddddddd)
  )

  (label "ESP32_I2C_SCL" (at 63.5 129.54 0)
    (effects (font (size 1.016 1.016)) (justify left bottom))
    (uuid eeeeeeee-eeee-eeee-eeee-eeeeeeeeeeee)
  )

  (label "3V3" (at 127 50.8 0)
    (effects (font (size 1.27 1.27)) (justify left bottom))
    (uuid ffffffff-ffff-ffff-ffff-ffffffffffff)
  )

  (label "5V" (at 127 63.5 0)
    (effects (font (size 1.27 1.27)) (justify left bottom))
    (uuid 10101010-1010-1010-1010-101010101010)
  )

  (label "GND" (at 127 76.2 0)
    (effects (font (size 1.27 1.27)) (justify left bottom))
    (uuid 20202020-2020-2020-2020-202020202020)
  )

  (label "12V_IN" (at 38.1 177.8 0)
    (effects (font (size 1.27 1.27)) (justify left bottom))
    (uuid 30303030-3030-3030-3030-303030303030)
  )

  (symbol (lib_id "ESP32-S3_1") (at 63.5 50.8 0) (unit 1)
    (in_bom yes) (on_board yes)
    (uuid 12345678-abcd-1234-abcd-123456789abc)
    (property "Reference" "U1" (id 0) (at 63.5 45.72 0))
    (property "Value" "ESP32-S3-DevKitC-1" (id 1) (at 63.5 48.26 0))
  )
)
