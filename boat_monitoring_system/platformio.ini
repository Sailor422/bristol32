; PlatformIO Project Configuration File
;
; Boat Monitoring System for Bristol 32 "Liberty"
;
; Build environments for both node and hub firmware
; Uncomment the desired environment and upload
;
; Usage:
;   pio run -e node_esp32s3        # Build node firmware for ESP32-S3
;   pio run -e hub_esp32s3 -t upload  # Build and upload hub firmware

[platformio]
default_envs = node_esp32s3

[env]
; Common settings for all environments
framework = arduino
monitor_speed = 115200
monitor_filters = esp32_exception_decoder
lib_deps =
    mikem/RadioHead@^1.120
    adafruit/Adafruit BME280 Library@^2.2.2
    adafruit/Adafruit BusIO@^1.14.1
    adafruit/Adafruit GFX Library@^1.11.3
    adafruit/Adafruit ILI9341@^1.5.12

; ============================================================================
; NODE FIRMWARE ENVIRONMENTS
; ============================================================================

[env:node_esp32s3]
platform = espressif32
board = esp32-s3-devkitc-1
build_src_filter = +<node_firmware/>
build_flags =
    -D NODE_FIRMWARE
    -D ARDUINO_USB_CDC_ON_BOOT=1
    -D LORA_FREQUENCY=915.0

[env:node_esp32]
platform = espressif32
board = esp32dev
build_src_filter = +<node_firmware/>
build_flags =
    -D NODE_FIRMWARE
    -D LORA_FREQUENCY=915.0

; ============================================================================
; HUB FIRMWARE ENVIRONMENTS
; ============================================================================

[env:hub_esp32s3]
platform = espressif32
board = esp32-s3-devkitc-1
build_src_filter = +<hub_firmware/>
build_flags =
    -D HUB_FIRMWARE
    -D ARDUINO_USB_CDC_ON_BOOT=1
    -D LORA_FREQUENCY=915.0
lib_deps =
    ${env.lib_deps}
    adafruit/Adafruit ILI9488@^1.0.0

[env:hub_esp32]
platform = espressif32
board = esp32dev
build_src_filter = +<hub_firmware/>
build_flags =
    -D HUB_FIRMWARE
    -D LORA_FREQUENCY=915.0
lib_deps =
    ${env.lib_deps}
    adafruit/Adafruit ILI9488@^1.0.0

; ============================================================================
; EUROPEAN FREQUENCY VARIANTS (868 MHz)
; ============================================================================

[env:node_esp32s3_eu]
extends = env:node_esp32s3
build_flags =
    ${env:node_esp32s3.build_flags}
    -D LORA_FREQUENCY=868.0

[env:hub_esp32s3_eu]
extends = env:hub_esp32s3
build_flags =
    ${env:hub_esp32s3.build_flags}
    -D LORA_FREQUENCY=868.0

; ============================================================================
; ASIAN FREQUENCY VARIANTS (433 MHz)
; ============================================================================

[env:node_esp32s3_asia]
extends = env:node_esp32s3
build_flags =
    ${env:node_esp32s3.build_flags}
    -D LORA_FREQUENCY=433.0

[env:hub_esp32s3_asia]
extends = env:hub_esp32s3
build_flags =
    ${env:hub_esp32s3.build_flags}
    -D LORA_FREQUENCY=433.0

; ============================================================================
; NOTES:
; ============================================================================
;
; 1. Choose the appropriate frequency for your region:
;    - US/Americas: 915.0 MHz (default)
;    - Europe: 868.0 MHz (use _eu environments)
;    - Asia: 433.0 MHz (use _asia environments)
;
; 2. For ESP32-S3, USB CDC is enabled by default for serial communication
;
; 3. To change node ID or other settings, modify the firmware source code
;    or implement serial configuration interface
;
; 4. Libraries are automatically downloaded from PlatformIO registry
;
; 5. Build flags can be customized per environment as needed
;
